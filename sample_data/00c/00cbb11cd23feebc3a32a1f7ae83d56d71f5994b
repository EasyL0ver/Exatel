#{%player%.nowgame} true/false fieldにいるかどうか
#{%player%.blockstack} 数値 ブロックを引き出せる数

variables:
	{%player%.teleporter} = "true"

on rightclick with quartz:
	name of player's tool contains "&b&lTeleporter"
	targeted block is not quartz_ore or command_block or sign
	if {%player%.tper1} is set:
		if {%player%.tper2} is set:
			set block at {%player%.tper1} to {%player%.tperblock1}
			set block at {%player%.tper2} to {%player%.tperblock2}
			delete {%player%.tper1}
			delete {%player%.tper2}
			delete {%player%.tperblock1}
			delete {%player%.tperblock2}
			send "&c座標をリセットしました"
		else:
			set {%player%.tper2} to location of targeted block
			set {%player%.tperblock2} to type of targeted block
			set block at {%player%.tper2} to quartz_ore
			send "&a二つ目の座標をセットしました"
			command "/playsound minecraft:entity.item.break ambient %player% ~ ~ ~ 1.0 0.7 1.0"
	else:
		set {%player%.tper1} to location of targeted block
		set {%player%.tperblock1} to type of targeted block
		set block at {%player%.tper1} to quartz_ore
		send "&a一つ目の座標をセットしました"
		command "/playsound minecraft:entity.item.break ambient %player% ~ ~ ~ 1.0 0.7 1.0"

on sneak toggle:
	player is sneaking
	the block under player is quartz_ore
	{%player%.teleporter} is "true" 
	if location of the block under player is {%player%.tper1}:
		set {%player%.teleporter} to "false"
		teleport player to {%player%.tper2}
		wait 3 tick
		command "/execute %player% ~ ~ ~ tp %player% ~ ~1 ~"
		command "/playsound minecraft:item.chorus_fruit.teleport ambient %player% ~ ~ ~ 1.0 1.0 1.0"
		command "/execute %player% ~ ~ ~ particle witchMagic ~ ~0.7 ~ 0.2 0.2 0.2 0.1 30"
		wait 3 tick
		send "&5Teleport!"
	else if location of the block under player is {%player%.tper2}:
		set {%player%.teleporter} to "false"
		teleport player to {%player%.tper1}
		wait 3 tick
		command "/execute %player% ~ ~ ~ tp %player% ~ ~1 ~"
		command "/playsound minecraft:item.chorus_fruit.teleport ambient %player% ~ ~ ~ 1.0 1.0 1.0"
		command "/execute %player% ~ ~ ~ particle witchMagic ~ ~0.7 ~ 0.2 0.2 0.2 0.1 30"
		wait 3 tick
		send "&5Teleport!"
	wait 2 seconds
	set {%player%.teleporter} to "true"

#テレポートロッド
on rightclick with blaze_rod:
	name of player's tool contains "&5&lTeleport Rod"
	if {%player%.TeleportRod} is "false":
		send "&7リキャスト中です"
		stop
	command "/tp %player% @p[name=!%player%]"
	command "/playsound minecraft:item.chorus_fruit.teleport ambient %player% ~ ~ ~ 1.0 1.0 1.0"
	send "&5Teleport!!"
	set {%player%.TeleportRod} to "false"
	wait 20 seconds
	set {%player%.TeleportRod} to "true"
	send "&7<<<&a特殊アイテム再使用可能&7>>> &5&lTeleport Rod"

on rightclick with cat_music_disc:
	name of player's tool contains "&a&lLocation Exchange"
	if {%player%.LocationExchange} is "false":
		send "&7リキャスト中です"
		stop
	player's target is a player
	command "/execute %player% ~ ~ ~ particle fireworksSpark ~ ~1 ~ 0.4 0.4 0.4 0.08 30"
	set {_victim} to location of player's target
	teleport player's target to player
	teleport player to {_victim}
	command "/playsound entity.endermen.teleport ambient %player% ~ ~ ~ 1.0 1.0 1.0"
	command "/execute %player% ~ ~ ~ particle fireworksSpark ~ ~1 ~ 0.4 0.4 0.4 0.08 30"
	command "/playsound entity.endermen.teleport ambient %player's target% ~ ~ ~ 1.0 1.0 1.0"
	set {%player%.LocationExchange} to "false"
	wait 30 seconds
	set {%player%.LocationExchange} to "true"
	send "&7<<<&a特殊アイテム再使用可能&7>>> &a&lLocation Exchange"


on rightclick with lead:
	name of player's tool contains "&d&lノリタクル・テンタクル"
	cancel event
	if {%player%.ノリタクル・テンタクル} is "false":
		send "&7リキャスト中です"
		stop
	player's target is a player
	make the player ride player's target
	send "&5Hooooooo!!"
	set {%player%.ノリタクル・テンタクル} to "false"
	wait 20 seconds
	set {%player%.ノリタクル・テンタクル} to "true"
	send "&7<<<&a特殊アイテム再使用可能&7>>> &d&lノリタクル・テンタクル"

#		loop 10 times:
#			add 1 to {_c}
#			command "/playsound minecraft:entity.blaze.hurt ambient %player% ~ ~ ~ 1.0 0.5 1.0"
#			the block {_c} meter above {_lc} is air
#			set the block {_c} meter above {_lc} to (1st line of player's tool's lore) parsed as item
#			wait 3 tick
# 2 meters down
#spawn a TNT 5 meters above and 2 meters horizontally behind the player

on rightclick with nether_brick_item:
	name of player's tool contains "&6&lオートビルド・壁"
	if {%player%.オートビルド} is "false":
		send "&7リキャスト中です"
		stop
	targeted block is not air
	set {_lc1} to location of the block and 2 meters horizontally forward and 4 meters horizontally left the player
	set {_lc2} to location of the block and 2 meters horizontally forward and 3 meters horizontally left the player
	set {_lc3} to location of the block and 2 meters horizontally forward and 2 meters horizontally left the player
	set {_lc4} to location of the block and 2 meters horizontally forward and 1 meters horizontally left the player
	set {_lc5} to location of the block and 2 meters horizontally forward the player
	set {_lc6} to location of the block and 2 meters horizontally forward and 1 meters horizontally right the player
	set {_lc7} to location of the block and 2 meters horizontally forward and 2 meters horizontally right the player
	set {_lc8} to location of the block and 2 meters horizontally forward and 3 meters horizontally right the player
	set {_lc9} to the block and 2 meters horizontally forward and 4 meters horizontally right the player
	send "&6発動！"
	set {_up} to 0
	set {_lcc} to 1
	loop 9 times:
		loop 10 times:
			the block {_le} meter left the block {_up} meter above {_lc%{_lcc}%} is air
			command "/playsound minecraft:entity.blaze.hurt ambient %player% ~ ~ ~ 0.8 0.5 0.8"
			set the block {_le} meter left the block {_up} meter above {_lc%{_lcc}%} to wool
			add 1 to {_up}
			wait 1 tick
		set {_up} to 0
		add 1 to {_lcc}
	set {%player%.オートビルド} to "false"
	wait 3 seconds
	set {%player%.オートビルド} to "true"
	send "&7<<<&a特殊アイテム再使用可能&7>>> &6&lオートビルド"