#include <Mouse.h>
#include <Keyboard.h>
#define DELAY 5


  enum PinAssignments
  {
    encoderPinA = 0,
    encoderPinB = 1,
    encoderPinC = 3,
    encoderPinD = 2,
    
  };

  int encoderPos[] = {0,0};
  static boolean rotating[] = {false,false};

  boolean A_set = false;
  boolean B_set = false;
  boolean C_set = false;
  boolean D_set = false;

void doEncoderA() {
  if(digitalRead(encoderPinA) != A_set) {
    A_set = !A_set;

    if(A_set && !B_set) {
      encoderPos[0] += 1;
    }
      rotating[0] = false;
  }
}

void doEncoderB() {
    if(digitalRead(encoderPinB) != B_set) {
    B_set = !B_set;

    if(B_set && !A_set) {
      encoderPos[0] -= 1;
    }
      rotating[0] = false;
  }
}

void doEncoderC() {
    if(digitalRead(encoderPinC) != C_set) {
    C_set = !C_set;

    if(C_set && !D_set) {
      encoderPos[0] += 1;
    }
      rotating[0] = false;
  }
}

void doEncoderD() {
  if(digitalRead(encoderPinD) != D_set) {
    D_set = !D_set;

    if(D_set && !C_set) {
      encoderPos[0] -= 1;
    }
      rotating[0] = false;
  }
}

void setup() {
  pinMode(4, INPUT_PULLUP);
  pinMode(A0, INPUT_PULLUP);
  pinMode(A1, INPUT_PULLUP);
  pinMode(A2, INPUT_PULLUP);
  pinMode(A3, INPUT_PULLUP);
  pinMode(A4, INPUT_PULLUP);
  pinMode(A5, INPUT_PULLUP);
  Keyboard.begin();

  pinMode(encoderPinA, INPUT_PULLUP);
  pinMode(encoderPinB, INPUT_PULLUP);
  pinMode(encoderPinC, INPUT_PULLUP);
  pinMode(encoderPinD, INPUT_PULLUP);

  attachInterrupt(0, doEncoderC, CHANGE);
  attachInterrupt(1, doEncoderD, CHANGE);

  attachInterrupt(2, doEncoderA, CHANGE);
  attachInterrupt(3, doEncoderB, CHANGE);

  Serial.begin(9600);
}

void loop() {
  if(digitalRead(4)==LOW) {
    Keyboard.press('a');
  }
  if(digitalRead(4)==HIGH) {
    Keyboard.press('a');
  }
  if(digitalRead(A0)==LOW) {
    Keyboard.press('b');
  }
  if(digitalRead(A0)==HIGH) {
    Keyboard.press('b');
  }
  if(digitalRead(A1)==LOW) {
    Keyboard.press('c');
  }
  if(digitalRead(A1)==HIGH) {
    Keyboard.press('c');
  }
  if(digitalRead(A2)==LOW) {
    Keyboard.press('d');
  }
  if(digitalRead(A2)==HIGH) {
    Keyboard.press('d');
  }
  if(digitalRead(A3)==LOW) {
    Keyboard.press('e');
  }
  if(digitalRead(A3)==HIGH) {
    Keyboard.press('e');
  }
  if(digitalRead(A4)==LOW) {
    Keyboard.press('f');
  }
  if(digitalRead(A4)==HIGH) {
    Keyboard.press('f');
  }

  for(int i=0; i<=1; i++) {
    rotating[i] = true;
    if(encoderPos[i] != 0) {
      if(i==0) {
        Mouse.move(encoderPos[i], 0, 0);
      }
      if(i==1) {
        Mouse.move(0, encoderPos[i], 0);
      }

      encoderPos[i] = 0;
    }
  }
  delay(DELAY);
 
}