Match Group *,!localshelluser,!DOMshellusers USER *,!someuser
  ChrootDirectory /x
  ForceCommand internal-sftp
	
$ sudo getent passwd my.user
DOMmy.user:*:3000011:100:My User:/x/home/my.user:/bin/bash
$ sudo getent group shellusers
DOMshellusers:x:3000014:DOMmy.user,DOMother.user
$ samba-tool group listmembers shellusers
my.user
other.user
	
Jan 13 13:59:42 myserver sshd[368397]: debug1: user my.user matched group list *,!DOM\shellusers at line 112
Jan 13 13:59:42 myserver sshd[368397]: debug1: user my.user matched 'User *,!someuser' at line 112