# Minimal Sphinx configuration sample for laconica
#

source src1
{
        type                                    = mysql
        sql_host                                = localhost
        sql_user                                = *
        sql_pass                                = *
        sql_db                                  = *
        sql_port                                = 3306
        sql_query                               = SELECT id, UNIX_TIMESTAMP(created) as created_ts, nickname, fullname, location, bio, homepage FROM profile
        sql_query_info                  = SELECT * FROM profile where id = $id
        sql_attr_timestamp              = created_ts
}


source src2
{
        type                                    = mysql
        sql_host                                = localhost
        sql_user                                = *
        sql_pass                                = *
       sql_db                                  = *
        sql_port                                = 3306
        sql_query                               = SELECT id, UNIX_TIMESTAMP(created) as created_ts, content FROM notice
        sql_query_info                  = SELECT * FROM notice where id = $id
        sql_attr_timestamp              = created_ts
}
index identica_notices
{
        source                                  = src2
        path                                    = /opt/local/data/identica_notices
        docinfo                                 = extern
        charset_type                    = utf-8
        min_word_len                    = 3
    #    stopwords                               = /opt/local/data/stopwords-en.txt
}


index identica_people
{
        source                                  = src1
        path                                    = /opt/local/data/identica_people
        docinfo                                 = extern
        charset_type                    = utf-8
        min_word_len                    = 3
    #    stopwords                               = /opt/local/data/stopwords-en.txt
}

indexer
{
        mem_limit                               = 300M
}
searchd
{
        port                                    = 3312
        log                                     = /opt/local/log/searchd.log
        query_log                               = /opt/local/log/query.log
        read_timeout                    = 5
        max_children                    = 30
        pid_file                                = /var/run/searchd.pid 
        max_matches                             = 1000
        seamless_rotate                 = 1
        preopen_indexes                 = 0
        unlink_old                              = 1
}


####EOF####