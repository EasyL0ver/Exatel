package moreAdvanced;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import swingBasics.SwingConsole;

class GameDialog extends JDialog
{
    public JTextField player = new JTextField(15);
    public JButton[] squares  = new JButton[9];
   
   
    public GameDialog( TicTacToe parent)
    {
        super( parent,"GameBoard",true);
       
        player.setText("Player 1 Turn");
        player.setEditable(false);
        player.setSize(100, (int)player.getSize().getHeight());
       
        Integer rows = 3;
        //Integer rows = Integer.parseInt(parent.number.getText());
        setLayout(new GridLayout(rows+1,rows));
        //squares = new JButton[rows*rows];
 
        ActionListener al = new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                if ( ((JButton)e.getSource()).getText().equals(""))
                {
                    if ( player.getText().equals("Player 1 Turn"))
                    {
                        ((JButton)e.getSource()).setText("X");
                        CheckResult();
                        player.setText("Player 2 Turn");
                    }
                    else
                    {
                        ((JButton)e.getSource()).setText("O");
                        CheckResult();
                        player.setText("Player 1 Turn");
                    }
                }
            }
        };
       
       
       
        for ( JButton b : squares)
        {
            b = new JButton("");
            b.setPreferredSize(new Dimension(100, 100));
            b.addActionListener(al);
           
            add(b);
        }
       
        add(player);
        setSize(300,320);
    }
   
    //public void CheckWinning(TicTacToe parent)
        public void CheckResult()
        {
            //Integer x = Integer.parseInt(parent.number.getText());
            Integer x = 3;
            for ( int i = 0 ; i < 9 ; i+=3)
            {
                if ( squares[i].getText().equals(""))//.equals(squares[i+1]) && squares[i].getText().equals(squares[i+2]))
                {
                    ShowResult();
                }
            }
        }
       
        public void ShowResult()
        {
            JOptionPane.showInternalMessageDialog(null, "Player " + player.getText() +" won! /n Congratulations!", "The end!", JOptionPane.INFORMATION_MESSAGE);
        }
   
}


public class TicTacToe extends JFrame 
{
	JButton b1 = new JButton("Start game");
	//public JTextField number = new JTextField("3");
	public GameDialog game ;
	
	
	public TicTacToe ( )
	{
		setLayout( new FlowLayout());
		game = new GameDialog(this);
		b1.addActionListener(new ActionListener()
		{
			public void actionPerformed(ActionEvent e)
			{
				game.setVisible(true);
			}
		});
		b1.setSize(100,100);
		//add(number);
		add(b1);
		
	}

	public static void main(String[] args) 
	{
		SwingConsole.run(new TicTacToe(), 300, 300);

	}

}