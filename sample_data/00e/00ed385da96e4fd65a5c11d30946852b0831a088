require 'spec_helper'

describe UserSessionsController do
  fixtures :users

  describe "GET new" do
    describe "with user is not logged in" do
      it "shows the login view" do
        get :new
        response.should render_template("new")
      end
    end

    describe "with user is logged in" do
      before(:each) do
        UserSession.create({:email => 'test@test.com', :password => 'testpass'})
      end

      it "redirects to the mypage" do
        get :new
        response.should redirect_to(mypage_path)
      end
    end
  end
end