{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## <b>topic modeling</b>\n",
    "- The NLP task of identifying automatically major themes in a text, usually by identifying informative words"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "- Built an unsupervised topic model using LDA(Latent Dirichlet Allocation)\n",
    "- Explored the impact of text preprocessing, including removing stop words and stemming\n",
    "- Built a supervised topic model using TF-IDF(term frequency-inverse document frequency)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [],
   "source": [
    "#install.packages(\"modeltools\")   # a dependency of topicmodels\n",
    "#install.packages(\"topicmodels\", type=\"source\")  # should compile from source"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### setting up workspace"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "─ Attaching packages ──────────────────── tidyverse 1.2.1 ─\n",
      "✔ ggplot2 3.0.0     ✔ purrr   0.2.5\n",
      "✔ tibble  1.4.2     ✔ dplyr   0.7.6\n",
      "✔ tidyr   0.8.1     ✔ stringr 1.3.1\n",
      "✔ readr   1.1.1     ✔ forcats 0.3.0\n",
      "─ Conflicts ───────────────────── tidyverse_conflicts() ─\n",
      "✖ dplyr::filter() masks stats::filter()\n",
      "✖ dplyr::lag()    masks stats::lag()\n",
      "Loading required package: NLP\n",
      "\n",
      "Attaching package: ‘NLP’\n",
      "\n",
      "The following object is masked from ‘package:ggplot2’:\n",
      "\n",
      "    annotate\n",
      "\n"
     ]
    }
   ],
   "source": [
    "library(tidyverse) # general utility & workflow functions\n",
    "library(tidytext) # tidy implimentation of NLP methods\n",
    "library(topicmodels) # for LDA topic modelling \n",
    "library(tm) # general text mining functions, making document term matrixes\n",
    "library(SnowballC) # for stemming"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Parsed with column specification:\n",
      "cols(\n",
      "  id = col_integer(),\n",
      "  qid1 = col_integer(),\n",
      "  qid2 = col_integer(),\n",
      "  question1 = col_character(),\n",
      "  question2 = col_character(),\n",
      "  is_duplicate = col_integer()\n",
      ")\n"
     ]
    }
   ],
   "source": [
    "questions <- read_csv(\"./quora/train.csv\")\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<thead><tr><th scope=col>id</th><th scope=col>qid1</th><th scope=col>qid2</th><th scope=col>question1</th><th scope=col>question2</th><th scope=col>is_duplicate</th></tr></thead>\n",
       "<tbody>\n",
       "\t<tr><td>0                                                                                         </td><td> 1                                                                                        </td><td> 2                                                                                        </td><td>What is the step by step guide to invest in share market in india?                        </td><td>What is the step by step guide to invest in share market?                                 </td><td>0                                                                                         </td></tr>\n",
       "\t<tr><td>1                                                                                         </td><td> 3                                                                                        </td><td> 4                                                                                        </td><td>What is the story of Kohinoor (Koh-i-Noor) Diamond?                                       </td><td>What would happen if the Indian government stole the Kohinoor (Koh-i-Noor) diamond back?  </td><td>0                                                                                         </td></tr>\n",
       "\t<tr><td>2                                                                                         </td><td> 5                                                                                        </td><td> 6                                                                                        </td><td>How can I increase the speed of my internet connection while using a VPN?                 </td><td>How can Internet speed be increased by hacking through DNS?                               </td><td>0                                                                                         </td></tr>\n",
       "\t<tr><td>3                                                                                         </td><td> 7                                                                                        </td><td> 8                                                                                        </td><td>Why am I mentally very lonely? How can I solve it?                                        </td><td>Find the remainder when [math]23^{24}[/math] is divided by 24,23?                         </td><td>0                                                                                         </td></tr>\n",
       "\t<tr><td>4                                                                                         </td><td> 9                                                                                        </td><td>10                                                                                        </td><td>Which one dissolve in water quikly sugar, salt, methane and carbon di oxide?              </td><td>Which fish would survive in salt water?                                                   </td><td>0                                                                                         </td></tr>\n",
       "\t<tr><td>5                                                                                         </td><td>11                                                                                        </td><td>12                                                                                        </td><td>Astrology: I am a Capricorn Sun Cap moon and cap rising...what does that say about me?    </td><td>I'm a triple Capricorn (Sun, Moon and ascendant in Capricorn) What does this say about me?</td><td>1                                                                                         </td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "\\begin{tabular}{r|llllll}\n",
       " id & qid1 & qid2 & question1 & question2 & is\\_duplicate\\\\\n",
       "\\hline\n",
       "\t 0                                                                                          &  1                                                                                         &  2                                                                                         & What is the step by step guide to invest in share market in india?                         & What is the step by step guide to invest in share market?                                  & 0                                                                                         \\\\\n",
       "\t 1                                                                                          &  3                                                                                         &  4                                                                                         & What is the story of Kohinoor (Koh-i-Noor) Diamond?                                        & What would happen if the Indian government stole the Kohinoor (Koh-i-Noor) diamond back?   & 0                                                                                         \\\\\n",
       "\t 2                                                                                          &  5                                                                                         &  6                                                                                         & How can I increase the speed of my internet connection while using a VPN?                  & How can Internet speed be increased by hacking through DNS?                                & 0                                                                                         \\\\\n",
       "\t 3                                                                                                                        &  7                                                                                                                       &  8                                                                                                                       & Why am I mentally very lonely? How can I solve it?                                                                       & Find the remainder when {[}math{]}23\\textasciicircum{}\\{24\\}{[}/math{]} is divided by 24,23?                          & 0                                                                                                                       \\\\\n",
       "\t 4                                                                                          &  9                                                                                         & 10                                                                                         & Which one dissolve in water quikly sugar, salt, methane and carbon di oxide?               & Which fish would survive in salt water?                                                    & 0                                                                     