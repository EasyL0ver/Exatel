id: metro_plu
label: Import des Plu sur D8
migration_group: metropole
source:
  plugin: plu_plu
destination:
  plugin: entity:node
process:
  type:
    plugin: default_value
    default_value: 'plu'
  title: subtitle
  uid:
    plugin: default_value
    default_value: 1
  'body/value': text
  'body/format':
    plugin: default_value
    default_value: full_html
  created: date_start
  modified: date_start
  status:
    plugin: default_value
    default_value: 1
  promoted:
    plugin: default_value
    default_value: 0
  field_commune_taxonomie: city_name
  field_fichier_pdf:
    -
      plugin: migration
      migration: metro_plu_file
      source: documents
  field_fichier_pdf/description:
    -
      plugin: default_value
      default_value: 'test description'
migration_dependencies: 
  optional:
    - plu_file
dependencies:
  enforced:
    module:
      - metro_migrate