int currentPosition = 0

File countFile = new File('../resources/count.txt')

if(countFile.exists()){
    currentPosition = Integer.parseInt(countFile.readLines().get(0))
}

println("Current position is - " + currentPosition)

def thingId = ""

try{
    thingId = new File( '../resources/things.txt' ).readLines().get(currentPosition)
} catch(error){
    println("It didn't work. Maybe you're out of things to read! " + error.toString())
}

println(deviceId)
// do stuff with thingId here....



//
countFile.write((currentPosition + 1).toString())