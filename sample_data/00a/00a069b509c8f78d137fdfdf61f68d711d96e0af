-- by Mistigrounet#0000 (if there is any issues xD)

function eventNewGame ()
 tfm.exec.newGame ("#10")
 time = 123 -- seconds (you can change it by the time you want, 123 for 120s + 3s to load the map)
 tfm.exec.setGameTime (time, true)
 mouseAll = {} -- contains the name of every mouse in the room
 for name in pairs (tfm.get.room.playerList) do
  table.insert (mouseAll, name)
 end
end

eventNewGame ()

function eventPlayerDied (name)
 for i = 1, #mouseAll do
  if mouseAll[i] == name then
   table.remove(mouseAll, i)
  end
 end
end

-- when the player will die, his name will be removed from mouseAll (so now mouseAll contains only player alive)

function eventLoop (currentTime, timeRemaining)
 time = time - 0.5
 if time == 20 then
  for i = 1, #mouseAll do
   tfm.exec.giveCheese (mouseAll[i]) -- or any action
  end
 end
end

-- for every player in mouseAll, they will receive cheese when time = 20