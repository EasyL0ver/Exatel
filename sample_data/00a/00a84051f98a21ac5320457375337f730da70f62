~# find /dev -type b 
     
~# dd if=/dev/block/bootdevice/by-name/userdata of=/path/to/ext_sdcard/data.img 
     
~$ adb exec-out dd if=if=/dev/block/bootdevice/by-name/userdata > data.img 
     
~# mountpoint /data && umount /data

~# echo '0' >/sys/class/android_usb/android0/enable
~# echo '/dev/block/bootdevice/by-name/userdata' >/sys/class/android_usb/android0/f_mass_storage/lun/file
~# echo 'mass_storage' >/sys/class/android_usb/android0/functions
~# echo '1' >/sys/class/android_usb/android0/enable 
     
~# blkid | grep userdata
/dev/sdb: PARTLABEL="userdata" PARTUUID="..." 
     
~# mkdir /data
~# mount -o ro /dev/sdb /data 
     
~# dd if=/dev/sdb of=data.img
~# extundelete --restore-all data.img 
     
~# extundelete --restore-all /dev/sdb 
     
dd if=/data of=/sdcard/data.img 
     
adb shell dd if=/data of=/sdcard/data.img