<!DOCTYPE html>
<!-- saved from url=(0063)https://pulsoid.net/widget/0271a96c-6a62-4070-a697-d8370d0b8f8d -->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="./pulse.js" type="text/javascript"></script>
        <script th:inline="javascript" type="text/javascript">
                var preference = {"backgroundColor":"transparent","font":"Ubuntu","ranges":[{"from":0,"to":70,"color":"#ffffff"},{"from":71,"to":100,"color":"#ffffff"},{"from":120,"to":400,"color":"#ff0000"}]};
                var ramielStream = "wss://ramiel.pulsoid.net/listen/0271a96c-6a62-4070-a697-d8370d0b8f8d";
                var backgroundColor = preference.backgroundColor;
				var currentMin = -1;
				var currentMax = -1;
                window.onload = function () {
                    var heartRate = document.getElementById("heartRate");
					//var minElement = document.getElementById("heartRateMin");
					//var maxElement = document.getElementById("heartRateMax");
                    startWs(ramielStream, function (event) {
                        var bpm = parseInt(JSON.parse(event.data).data.heartRate);
                        heartRate.innerHTML = bpm;
                        heartRate.style.color = findColor(preference.ranges, bpm);
						//if (bpm < currentMin || currentMin === -1)
						//{
						//	currentMin = bpm;
						//	//minElement.innerHTML = "Min: " + currentMin;
						//	//minElement.style.color = findColor(preference.ranges, currentMin);
						//}
						//if (bpm > currentMax || currentMax === -1)
						//{
						//	currentMax = bpm;
						//	//maxElement.innerHTML = "Max: " + currentMax;
						//	//maxElement.style.color = findColor(preference.ranges, currentMax);
						//}
                    }, open, close);
                    document.body.style.backgroundColor = backgroundColor;
                };


                function findColor(ranges, heartRate) {
                    for (var index in ranges) {
                        var range = ranges[index];
                        if (range.from <= heartRate && range.to >= heartRate) {
                            console.log(heartRate, range.color);
                            return range.color === undefined ? "transparent" : range.color;
                        }
                    }
                    return ranges[ranges.length - 1].color
                }


        </script>

        <style>

                .ubuntu {
                    font-family: monospace;
                    font-size: 14px;
                    text-align: center;
                }
				.custom {
                    font-family: monospace;
                    font-size: 14px;
                    text-align: center;
					display: inline-block;
                }
				@font-face {
					font-family: 'Ubuntu';
					font-style: normal;
					font-weight: 700;
					src: local('Ubuntu Bold'), local('Ubuntu-Bold'), url(https://fonts.gstatic.com/s/ubuntu/v11/4iCv6KVjbNBYlgoCxCvjsGyN.woff2) format('woff2');
					unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
				}
				body, html {
                    height: 100%;
                    width: 100%;
                    overflow: hidden;
                }
        </style>
        <script>
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function () {
                                (i[r].q = i[r].q || []).push(arguments)
                            }, i[r].l = 1 * new Date();
                    a = s.createElement(o),
                            m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

                ga('create', 'UA-84370067-1', 'auto');
                ga('send', 'pageview');
        </script>
    </head>
    <body style="background-color: transparent;">
        <span id="heartRate" class="ubuntu" style="font-family:Ubuntu">
		</span>
		<br>
		<!--<span id="heartRateMin" class="custom" style="font-family:Ubuntu;width:40%;text-align:left">
		</span>
		<span id="heartRateMax" class="custom" style="font-family:Ubuntu;width:40%;text-align:right">
        </span>-->

    
</body></html>