const Discord = require("discord.js");
const client = new Discord.Client();
const prefix = "?";



let statuses = ['?help | Naam', 'by: The-Galaxy.nl']

client.on("ready", async () => {
  console.log(`${client.user.username} is online!`);
});

client.on("guildMemberAdd", member =>{

    const channel = member.guild.channels.find("name", "Kanaal");

    if(!channel) return;

    var botembed = new Discord.RichEmbed()
    .setColor("#00ff42")
    .setDescription(`Hey ${member.user},\n\nWelkom in de server! Lees #welkom door en ik hoop dat je plezier hebt! Vragen stel het aan mij of aan een staff-member!`)
    .setFooter("© TheGalaxy - Welkom")

    channel.send(botembed);
})

client.on("message", async message => {
    if(message.author.bot) return;
    if(message.channel.type === "dm") return;
  
    var messageArray = message.content.split(" ");
    var cmd = messageArray[0];
    var args = messageArray.slice(1);
    if(cmd === `?help`){
   
        var botembed = new Discord.RichEmbed()
        .setColor("#00ff42")
        .addField("Naam bot commands:", `?help \n?botinfo \n?serverinfo \n?warn \n?purge \n?say \n?kick \n?mute \n?unmute \n?ban \n?unban`)
        .setFooter("© Naam | By The-Galaxy.nl")
     
      return message.channel.send(botembed);
      }

      if(cmd === `?serverinfo`){
            
        let online = message.guild.members.filter(member => member.user.presence.status !== 'offline');
        let day = message.guild.createdAt.getDate()
        let month = 1 + message.guild.createdAt.getMonth()
        let year = message.guild.createdAt.getFullYear()
         let sicon = message.guild.iconURL;
         let serverembed = new Discord.RichEmbed()
         .setFooter("© Naam | By The-Galaxy.nl")
         .setColor("#00ff42")
         .setThumbnail(sicon)
         .addField("Server ID", message.guild.id, true)
         .addField("Naam", message.guild.name, true)
         .addField("Gemaakt op", `${day}.${month}.${year}`)      
         .addField("Beheerder", message.guild.owner.user.tag, true)
         .addField("Region", message.guild.region, true)
         .addField("Kanalen", message.guild.channels.size, true)
         .addField("Leden", message.guild.memberCount, true)
         .addField("Bots", message.guild.members.filter(m => m.user.bot).size, true)
         .addField("Online", online.size, true)
         .addField("Roles", message.guild.roles.size, true);
         message.channel.send(serverembed);
      
      }

      if(cmd === `?botinfo`){   
        let bicon = bot.user.displayAvatarURL;
      let botembed = new Discord.RichEmbed()
      .setDescription("Info over de bot:")
      .setColor("#15f153")
      .setThumbnail(bicon)
      .addField("Naam", bot.user.username)
      .addField("Gemaakt op", bot.user.createdAt);
   
      message.channel.send(botembed);
  }


      if(cmd === `?userinfo`){
        let user = message.mentions.users.first() || message.author;
        if (!args[0]) return message.channel.send(`**:x: FOUT:** ?userinfo <@gebruiker>`);
        let embed = new Discord.RichEmbed()//Returns True If Message Author = Bot || FalseIf Message Author not Bot.
        .setColor(`#ff0000`)
        .addField('Gemaakt op', message.author.createdAt, false) //The time the user was created || .createdTimestamp - The timestamp the user was created at //The DM between the client's user and this user || If Nothing Returns "Null"
        .addField('ID', message.author.id) //The ID of the User/author //The presence of this user
        .addField('Status', message.author.presence.status) //The presence status of this user //The presence Game of this user
        .addField('Tag', message.author.tag) //The Discord "tag" for this user || Ex:- Sai Chinna#6718
        .addField('Username', message.author.username) //The username of the user || Ex:- Sai Chinna
   
        message.channel.send({ embed: embed });
        return;
    }

      if(cmd === "?purge") {
        const deleteCount = parseInt(args[0], 10);
        
        if(!deleteCount || deleteCount < 2 || deleteCount > 100)
          return message.reply("**:x: FOUT:** ?purge <cijfer>");
        const fetched = await message.channel.fetchMessages({limit: deleteCount});
        message.channel.bulkDelete(fetched)
          .catch(error => message.reply(`Couldn't delete messages because of: ${error}`));
      }

      if(cmd === `?review`){
        message.delete();
        var reason = args.slice(1).join(' ');
        if (!reason) return message.channel.send('**:x: FOUT:** !review <cijfer> <review>');
        if (!args[0]) return message.channel.send(`**:x: FOUT:** !review <cijfer> <review>`);
        var reviewChannel = message.guild.channels.find(`name`, "reviews")
   
        if(args[0] == "0"){
   
        var reviewEmbed = new Discord.RichEmbed()
        .setColor("#ff0000")
        .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
        .addField("Verstuurd Door", `${message.author.username}`)
        .addField("Aantal Sterren", `<:rvstar0:533710436009377792>`)
        .addField("Review", `${reason}`)
        .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "0,5"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#ff0000")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar2:533710493114695686>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "1"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FF1E03")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "1,5"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FF1E03")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar2:533710493114695686>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "2"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FF7203")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar:533710470453002242>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "2,5"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FF7203")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar2:533710493114695686>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "3"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FFAB03")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar:533710470453002242>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "3,5"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#FFAB03")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar2:533710493114695686>`)
            .addField("Review", `${reason}`)
            .setFooter(`©  | The-Galaxy.nl`)
        }
   
        if(args[0] == "4"){
   
            var reviewEmbed = new Discord.RichEmbed()
            .setColor("#B6FF03")
            .setDescription(":regional_indicator_r: :regional_indicator_e: :regional_indicator_v: :regional_indicator_i: :regional_indicator_e: :regional_indicator_w:")
            .addField("Verstuurd Door", `${message.author.username}`)
            .addField("Aantal Sterren", `<:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar:533710470453002242> <:rvstar:533710470453002242>`)
           