package asd1;

import java.awt.Image;
import java.awt.Toolkit;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

public class BenchMark {
	
	
	private static ImageIcon scaledIcon(String path) {
		Toolkit t = Toolkit.getDefaultToolkit();
		Image image= t.getImage(path);
		image = image.getScaledInstance(200, 125, Image.SCALE_FAST);
		return new ImageIcon(image);
	}
	
	private static ImageIcon scaledIcon2(String path) {
		Image bI = null;
		try {
			bI= ImageIO.read(new File(path));
		} catch (IOException e) {}
		bI = bI.getScaledInstance(200, 125, Image.SCALE_FAST);
		return new ImageIcon(bI);
	}
	
	
	private static ImageIcon scaledIcon3(String path) {

		InputStream stream = null;
		Image image= null;
		
		try {
			stream = new FileInputStream(path);
			image = ImageIO.read(stream);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		image = image.getScaledInstance(200, 125, Image.SCALE_FAST);
		return new ImageIcon(image);
	}
	
	private static void stampaMedia(long[] x)
	{
		int somma=0;
		for(int i=0;i<x.length;i++)
			somma+=x[i];
		
		System.out.println(somma/x.length+" ms");
	}

	public static void main(String[] args) {
		long tempo;
		ImageIcon dummy=null;
		long[] tempi= new long[10];
		long somma = 0;
		
		dummy=scaledIcon3("immagine.jpg");
		
		/**
		 * warm up
		 */
		for(int i=0;i<tempi.length;i++)
		{
			System.gc();
			tempo= System.currentTimeMillis();
			dummy=scaledIcon("immagine.jpg");
			tempi[i]=System.currentTimeMillis()-tempo;
		}
		
		stampaMedia(tempi);
		
		for(int i=0;i<tempi.length;i++)
		{
			System.gc();
			tempo= System.currentTimeMillis();
			dummy=scaledIcon2("immagine.jpg");
			tempi[i]=System.currentTimeMillis()-tempo;
		}
		
		stampaMedia(tempi);

		for(int i=0;i<tempi.length;i++)
		{
			System.gc();
			tempo= System.currentTimeMillis();
			dummy=scaledIcon3("immagine.jpg");
			tempi[i]=System.currentTimeMillis()-tempo;
		}
		
		stampaMedia(tempi);
		
		

	}

}