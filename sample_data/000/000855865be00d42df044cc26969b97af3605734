package pl.upos.loyalty.logprocessor.newcontrollers;

import java.util.ArrayList;
import java.util.List;
import java.util.function.Function;

import pl.upos.loyalty.logprocessor.controllers.OutputController;
import pl.upos.loyalty.logprocessor.models.linesmodels.CsvLineModel;
import pl.upos.loyalty.logprocessor.models.linesmodels.MultiLineModel;

public class CsvProcessor
{
	private List<CsvLineModel> listOfCsvLineAsObject = new ArrayList<>();


	public CsvProcessor()
	{
	}


	public List<CsvLineModel> getListOfCsvLineAsObject()
	{
		return listOfCsvLineAsObject;
	}

	public void setListOfCsvLineAsObject(
		final List<CsvLineModel> listOfCsvLineAsObject)
	{
		this.listOfCsvLineAsObject = listOfCsvLineAsObject;
	}



	public void extractCsv(final Function<MultiLineModel, CsvLineModel> funInterface)
	{
		final List<CsvLineModel> csvList = new ArrayList<>();

		final List<MultiLineModel> listOfMulti = LogLoader.getListOfMultiLineAsObject();

		for (final MultiLineModel mm : listOfMulti)
		{
			final CsvLineModel csv = funInterface.apply(mm);

			if (csv != null)
			{
				csvList.add(csv);
			}
		}

		listOfCsvLineAsObject.addAll(csvList);
	}



	public void saveToFile()
	{
		final String extensionForOutputFile = ".csv";

		OutputController.printDataToCsv(
									extensionForOutputFile,
									listOfCsvLineAsObject);
	}


}