#include <iostream>
#include<stack>
#include<algorithm> 
#include<stdio.h>
using namespace std; 
  

stack <int> mys;
struct Interval { 
    char A[100];
    int  B;
    int C;
    float D;
    int E;
}; 
  
 
bool compareInterval(Interval i1, Interval i2) 
{ 
    char temp;
    temp = mys.top();
    if(temp == 'A'){
    	return (i1.A < i2.A); 
	}
	else if(temp == 'B'){
		return (i1.B < i2.B); 
	}
	else if(temp == 'C'){
		return (i1.C < i2.C); 
	}
	else if(temp == 'D'){
		return (i1.D < i2.D); 
	}
    
} 


int main() 
{ 

	int nn;
	cin >> nn;
	Interval arr[nn];
	for( int i=0;i<nn;i++){
		cin >> arr[i].A;
		cin >> arr[i].B;
		cin >> arr[i].C;
		cin >> arr[i].D;
		cin >> arr[i].E;
	}




    int num;
    char c;
    cin >> num;
    do{
    
 		if(num != 0){
 			 for(int i=0;i<num;i++){
    	    cin >>c;
   		    mys.push(c);
   	 }

   	 while(!mys.empty())
  	  {
   	     stable_sort(arr, arr + 5, compareInterval); 
   	     mys.pop();
  	  }
  	  
  	   cout << "\n"; 
   	 for (int i = 0; i < 5; i++) 
        cout  << arr[i].A << endl; 												
		 }
   	
  
	cin >> num;  	  
	}while(!num == 0);
    
    
    
        
    
   
    
  
   

    return 0; 
}