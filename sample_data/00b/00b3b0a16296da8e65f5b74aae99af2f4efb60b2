import scrapy
from scrapy.http import FormRequest
from scrapy.utils.response import open_in_browser

class Test_spider(scrapy.Spider):
    """
    Log into the provided site with Scrapy
    """

    name = 'test'
    start_urls = ['https://www.privatelenderdatafeed.com/login/']


    def parse(self, response):
        """
        Send login data and use "from_response" to pre-populate session related data
        """

        return FormRequest.from_response(
            response,
            formdata={'ajaxreferred':'1',       # Not sure if I need this? It's included in the form data when I checked the site with dev tools
                      'email':'email',          # Email
                      'password':'password'     # Password
                      },
            callback = self.after_login)


    def after_login(self, response):
        """
        Open browser to check status 
        """

        open_in_browser(response)