const Discord = require('discord.js');
const bot = new Discord.Client({disableEveryone: true});
var Canvas = require('canvas');
var jimp = require('jimp');
const fs = require("fs");
const pretty = require('pretty-ms');
const userData = JSON.parse(fs.readFileSync('./userData.json', 'utf8'));
const moment = require('moment');
const rn = require('random-number');
let done = {};




const prefix = "w.";

bot.on('ready', () => {
  console.log(`Logged in as ${bot.user.tag}!`);
bot.user.setGame(`${prefix}help | Bot ON ${bot.guilds.size} Servers!`)
  console.log('')
  console.log('')
  console.log('╔[═════════════════════════════════════════════════════════════════]╗')
  console.log(`[Start] ${new Date()}`);
  console.log('╚[═════════════════════════════════════════════════════════════════]╝')
  console.log('')
  console.log('╔[════════════════════════════════════]╗');
  console.log(`Logged in as * [ " ${bot.user.username} " ]`);
  console.log('')
  console.log('Informations :')
  console.log('')
  console.log(`servers! [ " ${bot.guilds.size} " ]`);
  console.log(`Users! [ " ${bot.users.size} " ]`);
  console.log(`channels! [ " ${bot.channels.size} " ]`);
  console.log('╚[════════════════════════════════════]╝')
  console.log('')
  console.log('╔[════════════]╗')
  console.log(' Bot Is Online')
  console.log('╚[════════════]╝')
  console.log('')
  console.log('')
});





      bot.on('guildMemberAdd', member => {
      const welcomer =  member.guild.channels.find('name', '『welcome');

      var Canvas = require('canvas')
      var jimp = require('jimp')

      const w = ['./w1.png','./w2.png','./w3.png','./w4.png','./w5.png','./w6.png','./w7.png','./w8.png'];

              let Image = Canvas.Image,
                  canvas = new Canvas(401, 202),
                  ctx = canvas.getContext('2d');
              ctx.patternQuality = 'bilinear';
              ctx.filter = 'bilinear';
              ctx.antialias = 'subpixel';
              ctx.shadowColor = 'rgba(0, 0, 0, 0.4)';
              ctx.shadowOffsetY = 2;
              ctx.shadowBlur = 2;
              fs.readFile(`${w[Math.floor(Math.random() * w.length)]}`, function (err, Background) {
                  if (err) return console.log(err)
                  let BG = Canvas.Image;
                  let ground = new Image;
                  ground.src = Background;
                  ctx.drawImage(ground, 0, 0, 401, 202);

      }) 

                      let url = member.user.displayAvatarURL.endsWith(".webp") ? member.user.displayAvatarURL.slice(5, -20) + ".gif" : member.user.displayAvatarURL;
                      jimp.read(url, (err, ava) => {
                          if (err) return console.log(err);
                          ava.getBuffer(jimp.MIME_PNG, (err, buf) => {
                              if (err) return console.log(err);

                              //AVATAR�
                              let Avatar = Canvas.Image;
                              let ava = new Avatar;
                              ava.src = buf;
                              ctx.drawImage(ava, 152, 27, 95, 95);

                                                      //wl
                              ctx.font = '20px Arial Bold';
                              ctx.fontSize = '15px';
                              ctx.fillStyle = "#FFFFFF";
                              ctx.textAlign = "center";
                                                         ctx.fillText(member.user.username, 200, 154);

                              //NAME�
                              ctx.font = '20px Arial';
                              ctx.fontSize = '28px';
                              ctx.fillStyle = "#FFFFFF";
                              ctx.textAlign = "center";
                                    ctx.fillText(`${member.guild.memberCount} انت العضو رقم `
                              , 200, 190);

 welcomer.sendFile(canvas.toBuffer())



      })
      })
      });



    bot.on('guildMemberRemove', member => {
        var embed = new Discord.RichEmbed()
        .setAuthor(member.user.username, member.user.avatarURL)
        .setThumbnail(member.user.avatarURL)
        .setTitle(`الله معاك :raised_hand::skin-tone-1: :pensive:`)
        .setDescription(`مع السلامه تشرفنا بك :raised_hand::skin-tone-1: :pensive: `)
        .addField(':bust_in_silhouette:   تبقي',`**[ ${member.guild.memberCount} ]**`,true)
        .setColor('RED')
        .setFooter(`==== نــتــمــنــآ لــكــم آســتــمـــتــآع ====`, 'https://cdn.discordapp.com/attachments/397818254439219217/399292026782351381/shy.png')

    var channel =member.guild.channels.find('name', '『welcome')
    if (!channel) return;
    channel.send({embed : embed});
    })








bot.on('message', message => {
  if(message.author.bot) return;
    if(!message.channel.guild) return;
let args = message.content.split(' ').slice(1).join(' ');
if (message.content.startsWith(prefix + 'bc-users')){
if(!message.author.id === 'ur id') return;
message.channel.sendMessage('done |✅')
bot.users.forEach(m =>{
m.sendMessage(args)
})
}
});






bot.on('message', message => {
    if (message.author.bot) return;
     if (message.content === prefix + "help") {
		 message.channel.send(" Done | تــــم" , " |  تــــم ارســالك في الخــاص")
            
	
		 


 message.author.sendMessage(`
 **
__Welcome ❱❱ Bot__ By: _THE_SUPER_PVP_#1321
╔[❖════════════❖]╗
             Prefix = ' ${prefix} '
╚[❖════════════❖]╝
❖ ${prefix}members ➾ members info
❖ ${prefix}bot ➾ bot informations 
❖ ${prefix}support ➾ server informations 
❖ ${prefix}invite ➾ bot invite link
❖ ${prefix}credits ➾ see ur credits
❖ ${prefix}daily ➾ to get 200 credits on 24 h
❖ ${prefix}transfer ➾ if u will send credits to ur friends
╔[❖════════════❖]╗
                    Admin
╚[❖════════════❖]╝
❖ ${prefix}add-cs ➾ create channels
==================================================================
Welcome ❱❱ Bot created by :
╔[❖════════════❖]╗
<@353911061260402688>
╚[❖════════════❖]╝
==================================================================
**`);

    }
});






      bot.on("guildCreate", guild => {
        bot.users.get('ur id').send(' ***  BOT  ***   **Join To**   ***[ ' + `${guild.name}` + ' ]***   ,   **  Owner  **  ' + ' ***[ ' + '<@' + `${guild.owner.user.id}` + '>' + ' ]***')
        });

        bot.on("guildDelete", guild => {
        bot.users.get('353911061260402688').send(' ***  BOT  ***   **Leave From**   ***[ ' + `${guild.name}` + ' ]***   ,   **  Owner  **  ' + ' ***[ ' + '<@' + `${guild.owner.user.id}` + '>' + ' ]**')
      });






bot.on('message', message => {
  if(message.author.bot) return;

    if (!message.content.startsWith(prefix)) return;
    var args = message.content.split(' ').slice(1);
    var argresult = args.join(' ');
    if (message.author.id == 410835593451405312)
  return;
  if (message.content.startsWith(prefix + 'dnd')) {
    if (message.author.id !== 'ur id') return message.react('⚠')
  bot.user.setStatus('dnd');
  message.react("✅")
  }

   });


  bot.on('message', message => {

if(message.author.bot) return;
    if (!message.content.startsWith(prefix)) return;
    var args = message.content.split(' ').slice(1);
    var argresult = args.join(' ');
    if (message.author.id == 410835593451405312)
  return;


  if (message.content.startsWith(prefix + 'online')) {
    if (message.author.id !== 'ur id') return message.react('⚠')
    bot.user.setStatus('online');
  message.react("✅")
  }

   });


  bot.on('message', message => {

if(message.author.bot) return;
    if (!message.content.startsWith(prefix)) return;
    var args = message.content.split(' ').slice(1);
    var argresult = args.join(' ');
    if (message.author.id == 410835593451405312)
  return;
  if (message.content.startsWith(prefix + 'idle')) {
     if (message.author.id !== 'ur id') return message.react('⚠')
  bot.user.setStatus('idle');
  message.react("✅")
  }

   });


  bot.on('message', message => {
    if(message.author.bot) return;

    if (!message.content.startsWith(prefix)) return;
    var args = message.content.split(' ').slice(1);
    var argresult = args.join(' ');
    if (message.author.id == 410835593451405312)
  return;


  if (message.content.startsWith(prefix + 'offline')) {
      if (message.author.id !== 'ur id') return message.react('⚠')
  bot.user.setStatus('invisible');
  message.react("✔")
  }

   });










   bot.on("guildMemberAdd", member => {
    member.createDM().then(function (channel) {
    return channel.send(`${member} welcome to server `)
  }).catch(console.error)
  })









bot.on('message' , message => {
  if (message.content === prefix + "support") {
      if(!message.channel.guild) return message.reply('This Command is Only For Servers');
   const embed = new Discord.RichEmbed()
.setColor("RANDOM")
.setThumbnail(bot.user.avatarURL)
.setAuthor(message.author.username, message.author.avatarURL)
.setTitle('click here')
.setURL(`https://discord.gg/Ucfyrqr`)
message.channel.sendEmbed(embed);
 }
});








//invite

bot.on('message' , message => {
  if (message.content === prefix + "invite") {
      if(!message.channel.guild) return message.reply('This Command is Only For Servers');
   const embed = new Discord.RichEmbed()
.setColor("RANDOM")
.setThumbnail(bot.user.avatarURL)
.setAuthor(message.author.username, message.author.avatarURL)
.setTitle('Click Here To Invite bot')
.setURL(`https://discordapp.com/oauth2/authorize?client_id=${bot.user.id}&scope=bot&permissions=2146958588585`)
message.channel.sendEmbed(embed);
 }
});

//bot

bot.on('message', message => {
  if (message.content === prefix + "bot") {
     