<!DOCTYPE html>
<html>
<body>
<h1> Odtwarzacz muzyczny </h1>
<audio id="song" controls autoplay src="song1.mp3" type="audio/mpeg">
</audio>
<br>
<p id="piosenka"></p>
<p id="dlugosc"></p>


<script>

var song = new Array;
song[0] = "song1.mp3";
song[1] = "song2.mp3";
song[2] = "song3.mp3";
song[3] = "song4.mp3";
song[4] = "song5.mp3";

var audio;
//to było wcześniej w bezpośrednio w znaczniku audio jako loadedmetadata="setTimeout(changeSong, 3000)" i wykonywało się co 30 sekund, ale teraz nie wiem gdzie to wrzucić
setTimeout(changeSong, 3000)
audio = document.getElementById("song");
audio.load();
audio.preload = "auto";
var randomNumber;
var songLength;
var randomMoment;
var songTitle;
var whichSong = document.getElementById("piosenka");
whichSong.innerHTML = "Piosenka nr 1";
var howLong = document.getElementById("dlugosc");



audio.addEventListener('loadedmetadata', function(e) {
		howLong.innerHTML = "Długość to " + audio.duration.toString();
        console.log(audio.duration + "seconds");
    });


function changeSong(){
	//losowanie liczby od 1 do 5
	randomNumber = Math.floor((Math.random() * 5));
	//wypisanie numeru aktualnej piosenki
	songTitle = "Piosenka nr " + ((randomNumber)+1).toString();
	whichSong.innerHTML = songTitle;
	//zmiana piosenki na wylosowaną
	audio.src = song[randomNumber];
	songLength = audio.duration;
	randomMoment = Math.floor((Math.random() * songLength));
	audio.currentTime = randomMoment;
}


</script>


</body>
</html>