#LoanList.find(1996).update_funding_tables
  #LoanList.find(1990).update_funding_tables
  #update above entries to processed

  time_now = Time.now
  LoanDisbursement.find(:all).each do |i|
      if [1990, 1996, 2096, 2094].include?(i.loan_list_id)
          #nothing
      elsif i.disbursement_date < time_now
          i.update_attributes!(:skip_actual_disbursement_date_setup => true, :actual_disbursement_date => i.disbursement_date)
      else
          i.save!
      end
  end

  rows = ActiveRecord::Base.connection.execute(<<-EOM)
      SELECT MIN(loan_disbursements.actual_disbursement_date) ll_disbursement_date, loan_lists.id
      FROM loan_lists
      INNER JOIN loan_disbursements ON loan_disbursements.loan_list_id = loan_lists.id
      GROUP BY loan_lists.id
      HAVING ll_disbursement_date IS NOT NULL
  EOM

  rows.each do |i|
      ActiveRecord::Base.connection.execute("UPDATE loan_lists SET disbursement_date='%s' WHERE id=%s" % i)
  end