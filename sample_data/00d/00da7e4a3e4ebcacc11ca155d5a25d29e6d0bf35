import React, { useReducer, useContext } from "react";

const defaultState = {
  todos: [],
  addTodoInputText: ""
};

export const StoreContext = React.createContext([defaultState, () => {}]);

export function Store({ children }) {
  const [state, dispatch] = useReducer((state, action) => {
    switch (action.type) {
      case "ADD_TODO_UPDATE_TEXT":
        return {
          ...state,
          addTodoInputText: action.payload
        };
      default:
        return state;
    }
  }, defaultState);
  return (
    <StoreContext.Provider value={[state, dispatch]}>
      {children}
    </StoreContext.Provider>
  );
}

export function useStore() {
  return useContext(StoreContext);
}