#include "pch.h"
#include <iostream>
#include <conio.h>
using namespace std;

char sr = 'a';

bool jestcyfra(char z)
{
	//zwraca true, jesli z jest cyfra, wpw - false
	return z == '0' || z == '1' || z == ';'; //|| z == '-';
}

char szukajcyfry()
{
	//pomija znaki do napotkania pierwszej cyfry - zwraca te cyfre
	char z;

	do
	{
		cin >> z;
		if (z == ';') sr = z;
	} while (!jestcyfra(z));

	return z;
}

int wart(char z)
{
	//zwraca  wartosc z zakresu 0-1, ktora oznacza cyfra c
	return int(z) - int('0');
}

void czytajliczbe(double &w, int &s)
{
	//c jest pierwsza znaleziona          wczesniej          cyfra;          w          wyniku          wywolania          funkcji
	//nastapi przeczytanie          wszystkich          cyfr          danej          liczby          x,          a          argumenty
	//w oraz s przyjma          zadane          wartosadanie ci:          x=w/(10^s)
	const char k = ',';
	const double p = 2;
	char z;

	z = szukajcyfry();

	w = 0; s = 0;


	if (z != ';')
	{

		do
		{
			w = w * p + wart(z);
			cin >> z;

		} while (jestcyfra(z));
		if (z == k)
		{
			cin >> z;
			while (jestcyfra(z))
			{
				w = w * p + wart(z);
				cin >> z;
				s++;
			}
		}

	}



}

double oblicz(double w, int s)
{
	//zwraca x=w/(2^s)
	while (s > 0)
	{
		s--;
		w = w / 2;
	}
	return w;
}

int main()
{
	double wm;
	int sm;
	double suma = 0.0;
	cout << "Podaj tekst:\n";
	do
	{
		czytajliczbe(wm, sm);
		cout.precision(15);
		suma += oblicz(wm, sm);
		//cout << oblicz(wm, sm);
	} while (sr != ';');
	cout << "Wynik to:" << suma;

	_getch();
	return 0;
}