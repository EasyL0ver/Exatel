#include <iostream>
#include <string>

using namespace std;

void displayArray(int ** arr, int n){
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < n; j++) {
			cout << arr[i][j] << "\t";
		}
		cout << endl;
	}
}
void spinIt(int ** arr, int currentSize, int index, int startValue)
{
	if (currentSize == 2) {				
		arr[index][index] = startValue;
		arr[index][index + 1] = startValue - 1;		
		arr[index + 1][index] = startValue - 3;
		arr[index + 1][index + 1] = startValue - 2;
		
		return;
	}
	else if (currentSize == 1)
	{
		arr[index][index] = startValue;
		return;
	}
	else
	{
		int i = index; //pionowo
		int j = index; //poziomo
		int range = currentSize + index;
		for (; j < range; j++)
		{ 
			arr[i][j] = startValue--;      //gorny wiersz (wlacznie z ostatnim elementem)
		}
		j--; 
		for (; i < range; i++)
		{
			arr[i][j] = startValue--;      //prawa kolumna (bez 1 elementu)
		}
		j--;
		i--;
		for (; j >= index; j--)
		{
			arr[i][j] = startValue--;     //dolny wiersz  (bez ostatniego elementu)
		}
		j++;		
		for (; i > index; i--)
		{
			arr[i][j] = startValue--;      //lewa kolumna (bez pierwszego elementu)
		}
		spinIt(arr, currentSize-=2, ++index, startValue);
	}

}
int main()
{
	int** a;
	int n = 2;
	int startValue = 50;
	cout << "Podaj wymiary:";
	cin >> n;
	if (n < 2)
		return 0;

	a = new int*[n];
	for (int i = 0; i < n; ++i)
		a[i] = new int[n] {};
	spinIt(a, n,0, startValue);
	displayArray(a,n);
	getchar();
	getchar();

	return 0;
}